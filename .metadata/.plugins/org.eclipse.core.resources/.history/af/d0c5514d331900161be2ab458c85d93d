package firstPackage;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
	
public class Main {
	public static void main(String[] args) {
		try {
			System.out.println("try to connect");
		    Class.forName( "com.mysql.jdbc.Driver" );
		    getConnection();
		} catch ( ClassNotFoundException e ) {
			System.out.println("echec connection");
		    e.printStackTrace();
		    
		}
	}
	
	public static void getConnection() {
		String url = "jdbc:mysql://localhost:3306/mydb";
		String user = "root";
		String pass = "GAPP";
		Connection connexion = null;
		try {
		    connexion = DriverManager.getConnection( url, user, pass );
		    System.out.println("Bdd Connected");
		    displayDepartment(connexion);
		} catch ( SQLException e ) {
			e.printStackTrace();
		} finally {
		    if ( connexion != null )
		        try {
		            connexion.close();
		        } catch ( SQLException ignore ) {
		        	ignore.printStackTrace();
		        }
		}
	}
	
	public static void displayDepartment(Connection connexion) throws SQLException {
		Statement statement = connexion.createStatement();
		ResultSet resultat = statement.executeQuery( "SELECT CT_name FROM t_courses_t" );
		
		while ( resultat.next() ) {
			String CT_name = resultat.getString( "CT_name" );
			
			System.out.println("Course name : " + CT_name);
		}
		resultat.close();
	}
}
